---
title: Architecture
description: Understanding the monorepo structure and design patterns
---

Nilovon Starterkit is built with a modern, scalable architecture that follows industry best practices and enables rapid development.

## ğŸ›ï¸ Monorepo Structure

Our monorepo is organized using **Turborepo** and **pnpm workspaces** for optimal performance and developer experience.

```
nilovon-starterkit/
â”œâ”€â”€ ğŸ“ apps/                          # Application layer
â”‚   â”œâ”€â”€ ğŸ¯ app/                      # Dashboard application
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/                 # Utilities and configs
â”‚   â”‚   â”‚   â””â”€â”€ utils/               # Helper functions
â”‚   â”‚   â”œâ”€â”€ public/                  # Static assets
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸŒ web/                      # Web application
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”‚   â”‚   â””â”€â”€ lib/                 # Utilities and configs
â”‚   â”‚   â”œâ”€â”€ public/                  # Static assets
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”Œ server/                   # Backend API server
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ db/                  # Database layer
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ schema/          # Drizzle schemas
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts         # Database connection
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/                 # Core utilities
â”‚   â”‚   â”‚   â”œâ”€â”€ routers/             # API route handlers
â”‚   â”‚   â”‚   â””â”€â”€ index.ts             # Server entry point
â”‚   â”‚   â”œâ”€â”€ drizzle.config.ts        # Drizzle configuration
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“š docs/                     # Documentation site
â”‚       â”œâ”€â”€ content/                 # Markdown content
â”‚       â”œâ”€â”€ src/                     # Fumadocs configuration
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“ packages/                      # Shared packages
â”‚   â”œâ”€â”€ ğŸ¨ ui/                       # UI component library
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/          # Reusable UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/               # Custom React hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/                 # Utilities
â”‚   â”‚   â”‚   â””â”€â”€ styles/              # Global styles
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ typescript-config/           # TypeScript configurations
â”‚       â”œâ”€â”€ base.json                # Base TS config
â”‚       â”œâ”€â”€ nextjs.json              # Next.js specific config
â”‚       â”œâ”€â”€ react-library.json       # React library config
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ™ Root configuration
â”‚   â”œâ”€â”€ package.json                  # Workspace configuration
â”‚   â”œâ”€â”€ pnpm-workspace.yaml          # pnpm workspace config
â”‚   â”œâ”€â”€ turbo.json                    # Turborepo configuration
â”‚   â”œâ”€â”€ tsconfig.json                 # Root TypeScript config
â”‚   â””â”€â”€ biome.json                    # Code quality configuration
```

## ğŸ”„ Design Patterns

### 1. **Monorepo Architecture**

- **Single source of truth** for all related code
- **Shared dependencies** and configurations
- **Atomic commits** across multiple packages
- **Parallel builds** with intelligent caching

### 2. **Layered Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Presentation Layer        â”‚ â† Next.js apps
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Business Logic            â”‚ â† API routers
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Data Access Layer        â”‚ â† Drizzle ORM
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Infrastructure           â”‚ â† Database, Auth, etc.
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. **Component-Driven Development**

- **Atomic design** principles
- **Reusable components** in shared packages
- **Consistent design system** across apps
- **Type-safe props** with TypeScript

## ğŸš€ Key Architectural Decisions

### **Why Turborepo?**

- **Incremental builds** - Only rebuild what changed
- **Parallel execution** - Multiple tasks run simultaneously
- **Intelligent caching** - Skip unnecessary work
- **Remote caching** - Share builds across team members

### **Why pnpm?**

- **Efficient storage** - No duplicate packages
- **Strict dependency management** - Prevents phantom dependencies
- **Workspace support** - Native monorepo capabilities
- **Fast installation** - Optimized package resolution

### **Why Elysia?**

- **TypeScript-first** - Full type safety
- **High performance** - Built on Bun's HTTP server
- **Plugin ecosystem** - Extensible architecture
- **oRPC integration** - Type-safe client-server communication

### **Why Drizzle ORM?**

- **Type-safe queries** - Compile-time SQL validation
- **Zero runtime overhead** - No query builders
- **Migration system** - Automatic schema evolution
- **Multiple databases** - SQLite, PostgreSQL, MySQL support

## ğŸ” Security Architecture

### **Authentication Flow**

```
1. User Login â†’ 2. JWT Token â†’ 3. Protected Routes
     â†“              â†“              â†“
4. Session Store â† 5. Token Validation â† 6. Route Guard
```

### **API Security**

- **oRPC validation** - Type-safe input validation
- **Rate limiting** - Prevent abuse
- **CORS configuration** - Control cross-origin requests
- **Input sanitization** - Prevent injection attacks

## ğŸ“Š Data Flow

### **Frontend to Backend**

```
React Component â†’ API Client â†’ oRPC â†’ Elysia Router â†’ Drizzle â†’ Database
     â†‘              â†‘           â†‘         â†‘           â†‘         â†‘
   State â† Response â† Data â† Validated â† Parsed â† Queried â† Stored
```

### **Real-time Updates**

```
Database Change â†’ Drizzle Trigger â†’ WebSocket â†’ React State Update
      â†‘              â†‘              â†‘           â†‘
   Mutation â† API Call â† Event â† Subscription â† Component
```

## ğŸ¯ Scalability Considerations

### **Horizontal Scaling**

- **Stateless API servers** - Easy to replicate
- **Database connection pooling** - Efficient resource usage
- **CDN integration** - Global content delivery
- **Load balancing** - Distribute traffic evenly

### **Vertical Scaling**

- **Code splitting** - Load only what's needed
- **Lazy loading** - Defer non-critical resources
- **Image optimization** - Automatic WebP conversion
- **Bundle analysis** - Identify optimization opportunities

## ğŸ”§ Development Workflow

### **Local Development**

```
1. Code Changes â†’ 2. Hot Reload â†’ 3. Type Checking â†’ 4. Linting
     â†‘              â†‘              â†‘           â†‘
   Save File â† Browser Update â† TypeScript â† Biome
```

### **Quality Gates**

```
Commit â†’ Pre-commit Hooks â†’ Lint â†’ Format â†’ Type Check â†’ Build
  â†‘           â†‘              â†‘      â†‘        â†‘        â†‘
Git Push â† Tests â† Quality â† Code â† Styling â† Types â† Bundle
```

## ğŸŒ Deployment Architecture

### **Multi-Environment Support**

```
Development â†’ Staging â†’ Production
     â†‘           â†‘          â†‘
  Local DB â† Test DB â† Production DB
```

### **Infrastructure as Code**

- **Docker containers** - Consistent environments
- **Environment variables** - Configuration management
- **Health checks** - Service monitoring
- **Logging** - Centralized log aggregation

## ğŸ“ˆ Performance Architecture

### **Frontend Optimization**

- **Next.js Image** - Automatic image optimization
- **Code splitting** - Dynamic imports
- **Service workers** - Offline support
- **Bundle analysis** - Size monitoring

### **Backend Optimization**

- **Connection pooling** - Database efficiency
- **Query optimization** - Drizzle query planning
- **Caching strategies** - Redis integration
- **Compression** - Gzip/Brotli support

## ğŸ”® Future Considerations

### **Microservices Evolution**

- **Service boundaries** - Clear API contracts
- **Event-driven architecture** - Async communication
- **API versioning** - Backward compatibility
- **Feature flags** - Gradual rollouts

### **Cloud-Native Features**

- **Serverless functions** - Event-driven scaling
- **Edge computing** - Global performance
- **Container orchestration** - Kubernetes support
- **Observability** - Metrics, logs, and traces

---

**ğŸ—ï¸ Ready to dive deeper?** Explore our [Apps Overview](/docs/apps-overview) to understand each application's specific architecture, or check out the [Tech Stack](/docs/tech-stack) for detailed technology information.
